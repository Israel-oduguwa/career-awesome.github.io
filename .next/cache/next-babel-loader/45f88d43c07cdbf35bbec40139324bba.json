{"ast":null,"code":"import _toConsumableArray from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"C:/Users/Israel Oduguwa/Desktop/startup-server/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react'; // import './blog.css';\n\nimport 'react-quill/dist/quill.snow.css';\nimport AppBar from '@material-ui/core/AppBar';\nimport Icon from '@material-ui/core/Icon';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Select from '@material-ui/core/Select';\nimport useSWR from 'swr';\nimport { withRouter, useRouter } from \"next/router\";\nimport Chip from '@material-ui/core/Chip';\nimport Card from \"@material-ui/core/Card\";\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport ExpandMoreOutlinedIcon from '@material-ui/icons/ExpandMoreOutlined';\nimport { connect } from \"react-redux\";\nimport { getUserData } from \"../../../Redux/Actions/userAction\";\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport axios from \"axios\";\nimport RenderQuill from \"../../../components/WYSIWYG/RenderQuill\";\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize'; // const FetchData = (props) =>{\n//     const router = useRouter()\n//     const id  = router.query.id\n//     const { data, error } = useSWR(`https://us-central1-resume-builder-startup.cloudfunctions.net/api/getBlog/${id}`)\n//     if (error) return <div></div>\n//     if(!data) return <div>LOading...</div>\n//      if(props.display){\n//       return {\n//       }\n// }\n// }\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      justifyContent: 'center',\n      flexWrap: 'wrap',\n      listStyle: 'none',\n      padding: theme.spacing(0.5),\n      margin: 0\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    input: {\n      display: 'none'\n    }\n  };\n};\n\nexport var __N_SSP = true;\nexport var editBlog = /*#__PURE__*/function (_Component) {\n  _inherits(editBlog, _Component);\n\n  var _super = _createSuper(editBlog);\n\n  function editBlog() {\n    var _this;\n\n    _classCallCheck(this, editBlog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      body: \"\",\n      loading: false,\n      // language:\"\",\n      category: [\"category\"],\n      description: \"\",\n      title: \"\",\n      message: \"\",\n      thumbnailImage: \"\",\n      imageName: \"\",\n      caption: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", function (value) {\n      _this.setState({\n        body: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePost\", function () {\n      // localStorage.setItem('blog', this.state.body);\n      var newBlog = {\n        body: _this.state.body,\n        title: _this.state.title,\n        category: _this.state.category,\n        description: _this.state.description,\n        thumbnail: _this.state.thumbnailImage\n      };\n      axios.post(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/postBlog/\".concat(_this.props.blog.blogId, \"/update\"), newBlog).then(function (res) {\n        _this.props.getUserData();\n\n        _this.setState({\n          message: res.data.message\n        });\n\n        console.log(res.data);\n\n        _this.props.router.push('/admin/blogPosts');\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePostImageChange\", function (e) {\n      _this.setState({\n        loading: true\n      });\n\n      var image = e.target.files[0];\n      var formData = new FormData();\n      formData.append('image', image, image.name);\n      axios.post('/create-pdf/resumeImage', formData).then(function (res) {\n        _this.setState({\n          thumbnailImage: res.data.url,\n          imageName: res.data.imageName,\n          loading: false\n        });\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"PostTimelineImage\", function (e) {\n      var file = document.getElementById(\"postImage\");\n      file.click();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addCategory\", function (e) {\n      var val = e.target.value;\n\n      if (e.key === 'Enter' && val) {\n        if (_this.state.category.find(function (category) {\n          return category.toLowerCase() === val.toLowerCase();\n        })) {\n          return;\n        }\n\n        _this.setState({\n          category: [].concat(_toConsumableArray(_this.state.category), [val])\n        });\n\n        _this.tagInput.value = null;\n      } else if (e.key === 'Backspace' && !val) {\n        _this.deleteCat(_this.state.category.length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteCat\", function (index) {\n      var category = _toConsumableArray(_this.state.category);\n\n      category.splice(index, 1); // setChipData((chips) => chips.filter((chip) => chip.key !== chipToDelete.key));\n\n      _this.setState({\n        category: category\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(editBlog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.user.authenticated) {\n        this.setState({\n          body: this.props.blog.body,\n          category: this.props.blog.category,\n          title: this.props.blog.title,\n          thumbnailImage: this.props.blog.thumbnail,\n          description: this.props.blog.description\n        });\n      } else {\n        this.props.router.push('/signup');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var body = this.state.body;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(AppBar, {\n          children: /*#__PURE__*/_jsx(Toolbar, {\n            children: /*#__PURE__*/_jsx(\"h4\", {\n              children: \"BlogPost\"\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"container-fluid container2\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"col-md-9\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"title-box\",\n                children: /*#__PURE__*/_jsx(TextField, {\n                  id: \"title\",\n                  label: \"Title\",\n                  name: \"title\",\n                  onChange: this.handleChange,\n                  variant: \"outlined\",\n                  value: this.state.title,\n                  fullWidth: true\n                })\n              }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"rich-text\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"rich-text-wall\",\n                  children: true ? /*#__PURE__*/_jsx(RenderQuill, {\n                    body: body,\n                    handleChange: this.type\n                  }) : /*#__PURE__*/_jsx(\"div\", {\n                    children: \"Loading\"\n                  })\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-md-3\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"right-panel\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"meta-wall\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"language\",\n                        children: /*#__PURE__*/_jsxs(Select, {\n                          name: \"language\",\n                          id: \"language\",\n                          label: \"language\",\n                          children: [/*#__PURE__*/_jsx(MenuItem, {\n                            value: \"Website\",\n                            children: \"English\"\n                          }), /*#__PURE__*/_jsx(MenuItem, {\n                            value: \"Facebook\",\n                            children: \"French\"\n                          })]\n                        })\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"publish\",\n                        children: /*#__PURE__*/_jsx(Button, {\n                          onClick: this.handlePost,\n                          variant: \"contained\",\n                          color: \"primary\",\n                          endIcon: /*#__PURE__*/_jsx(ExpandMoreOutlinedIcon, {}),\n                          children: \"Update\"\n                        })\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"col-md-12 scheme-input\",\n                      children: [/*#__PURE__*/_jsx(Typography, {\n                        variant: \"subtitle\",\n                        gutterBottom: true,\n                        children: \"Description\"\n                      }), /*#__PURE__*/_jsx(TextareaAutosize, {\n                        onChange: this.handleChange,\n                        name: \"description\",\n                        \"aria-label\": \"maximum height\",\n                        placeholder: \"Short description of the article\",\n                        value: this.state.description //   defaultValue=\"L\n\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"col-md-12 cont\",\n                      children: /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"categories\",\n                        children: [/*#__PURE__*/_jsx(Typography, {\n                          variant: \"subtitle\",\n                          gutterBottom: true,\n                          children: \"Categories\"\n                        }), /*#__PURE__*/_jsxs(Paper, {\n                          component: \"ul\",\n                          className: classes.root,\n                          children: [this.state.category.map(function (cat, index) {\n                            return /*#__PURE__*/_jsx(\"li\", {\n                              children: /*#__PURE__*/_jsx(Chip, {\n                                label: cat,\n                                onDelete: function onDelete() {\n                                  return _this2.deleteCat(index);\n                                },\n                                className: classes.chip\n                              })\n                            }, index);\n                          }), /*#__PURE__*/_jsx(TextField, {\n                            className: \"categoryText\",\n                            label: \"New category\",\n                            onKeyDown: this.addCategory,\n                            ref: function ref(c) {\n                              _this2.tagInput = c;\n                            },\n                            id: \"standard-size-small\",\n                            size: \"small\"\n                          })]\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"col-md-12 conts\",\n                      children: [/*#__PURE__*/_jsx(Typography, {\n                        variant: \"subtitle\",\n                        gutterBottom: true,\n                        children: \"Thumbnail Image\"\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"file\",\n                        id: \"postImage\",\n                        accept: \"images/*\",\n                        className: classes.postImage,\n                        multiple: true,\n                        onChange: this.handlePostImageChange,\n                        hidden: \"hidden\"\n                      }), /*#__PURE__*/_jsx(\"label\", {\n                        htmlFor: \"contained-button-file\",\n                        children: /*#__PURE__*/_jsx(Button, {\n                          onClick: this.PostTimelineImage,\n                          variant: \"contained\",\n                          color: \"default\",\n                          endIcon: /*#__PURE__*/_jsx(PhotoCamera, {}),\n                          component: \"span\",\n                          children: \"Upload Image\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"br\", {}), this.state.thumbnailImage === \"\" && !this.state.loading ? /*#__PURE__*/_jsx(\"p\", {}) : this.state.loading ? /*#__PURE__*/_jsx(CircularProgress, {}) : /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(Tooltip, {\n                          title: \"cancelImage\",\n                          children: /*#__PURE__*/_jsx(IconButton //  onClick={this.cancelImage}o\n                          , {\n                            className: classes.coverButton,\n                            children: /*#__PURE__*/_jsx(CancelIcon, {\n                              style: {\n                                fontSize: \"4vh\"\n                              }\n                            })\n                          })\n                        }), /*#__PURE__*/_jsx(Card, {\n                          children: /*#__PURE__*/_jsx(CardMedia, {\n                            image: this.state.thumbnailImage,\n                            className: \"card-image2\"\n                          })\n                        })]\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"col-md-12 cont\",\n                      children: /*#__PURE__*/_jsx(TextField, {\n                        label: \"Caption\",\n                        onChange: this.handleChange,\n                        name: \"caption\",\n                        fullWidth: true,\n                        variant: \"outlined\"\n                      })\n                    })]\n                  })\n                })\n              })\n            })]\n          })\n        })]\n      });\n    }\n  }]);\n\n  return editBlog;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getUserData: getUserData\n})(withRouter(withStyles(styles)(editBlog)));","map":null,"metadata":{},"sourceType":"module"}