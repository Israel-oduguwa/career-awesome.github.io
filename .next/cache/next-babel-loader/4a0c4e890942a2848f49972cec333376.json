{"ast":null,"code":"import { SET_USER, LOADING_UI, LOADING_USER, CLEAR_ERRORS, SET_ERRORS } from \"../Types\";\nimport axios from \"axios\";\nexport const createUser = (userData, Router) => async dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post('https://us-central1-resume-builder-startup.cloudfunctions.net/api/createAccount', userData).then(res => {\n    console.log(res.data);\n    setAuthorizationHeader(res.data.firstIdToken);\n    storeSessionToken(res.data.refreshToken);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    Router.push('/admin/profile');\n    dispatch(getUserData());\n  }).catch(err => {\n    console.log(err.response.data); // dispatch({\n    //  type: SET_ERRORS,\n    //  payload: err.response.data\n    // })\n  });\n};\nexport const editUserDetails = userDetails => async dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  const res = await axios.post('https://us-central1-resume-builder-startup.cloudfunctions.net/api/user', userDetails);\n  dispatch(getUserData());\n  console.log(res.data); //   })\n  //   .catch((err) => console.log(err));\n}; //This will fetch all the user INfo from the DataBase\n\nexport const getUserData = () => async dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.get('https://us-central1-resume-builder-startup.cloudfunctions.net/api/user').then(res => {\n    dispatch({\n      type: SET_USER,\n      payload: res.data\n    });\n  }).catch(err => console.log(err));\n}; //This will refresh the acsess toekm\n\nexport const refreshIdToken = sessionToken => async dispatch => {\n  const res = await axios.post(`https://securetoken.googleapis.com/v1/token?key=AIzaSyBoIyQqz_8yKUFxjJO7jqBZWEslC7je7U4`, {\n    grant_type: \"refresh_token\",\n    refresh_token: sessionToken\n  });\n  console.log(res.data.access_token);\n  setAuthorizationHeader(res.data.access_token);\n  dispatch(getUserData()); // .catch((err) =>{\n  //     console.log(err)\n  // })\n}; //Set the Authorizationheader for the Jwt token and user permisssio\n\nconst setAuthorizationHeader = token => {\n  const FBIdToken = `Bearer ${token}`;\n  localStorage.setItem('FBIdToken', FBIdToken);\n  axios.defaults.headers.common['Authorization'] = FBIdToken;\n};\n\nconst storeSessionToken = sessionToken => {\n  const refreshToken = sessionToken;\n  localStorage.setItem('refreshToken', refreshToken);\n};\n\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem('FBIdToken');\n  localStorage.removeItem('refreshToken');\n  delete axios.defaults.headers.common['Authorization'];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n}; // Update User ACcount","map":{"version":3,"sources":["C:/Users/Israel Oduguwa/Desktop/startup-server/Redux/Actions/userAction.js"],"names":["SET_USER","LOADING_UI","LOADING_USER","CLEAR_ERRORS","SET_ERRORS","axios","createUser","userData","Router","dispatch","type","post","then","res","console","log","data","setAuthorizationHeader","firstIdToken","storeSessionToken","refreshToken","getUserData","push","catch","err","response","editUserDetails","userDetails","get","payload","refreshIdToken","sessionToken","grant_type","refresh_token","access_token","token","FBIdToken","localStorage","setItem","defaults","headers","common","logoutUser","removeItem","SET_UNAUTHENTICATED"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,UAAnB,EAA+BC,YAA/B,EAA6CC,YAA7C,EAA2DC,UAA3D,QAA6E,UAA7E;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,UAAU,GAAG,CAAEC,QAAF,EAAYC,MAAZ,KAAwB,MAAOC,QAAP,IAAmB;AACjEA,EAAAA,QAAQ,CAAC;AAACC,IAAAA,IAAI,EAACT;AAAN,GAAD,CAAR;AACAI,EAAAA,KAAK,CAACM,IAAN,CAAW,iFAAX,EAA8FJ,QAA9F,EACCK,IADD,CACOC,GAAD,IAAO;AACTC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAC,IAAAA,sBAAsB,CAACJ,GAAG,CAACG,IAAJ,CAASE,YAAV,CAAtB;AACAC,IAAAA,iBAAiB,CAACN,GAAG,CAACG,IAAJ,CAASI,YAAV,CAAjB;AACAX,IAAAA,QAAQ,CAACY,WAAW,EAAZ,CAAR;AACAZ,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEP;AAAR,KAAD,CAAR;AACAK,IAAAA,MAAM,CAACc,IAAP,CAAY,gBAAZ;AACAb,IAAAA,QAAQ,CAACY,WAAW,EAAZ,CAAR;AACH,GATD,EAUCE,KAVD,CAUQC,GAAD,IAAQ;AACXV,IAAAA,OAAO,CAACC,GAAR,CAAYS,GAAG,CAACC,QAAJ,CAAaT,IAAzB,EADW,CAEX;AACA;AACA;AACA;AACF,GAhBF;AAiBH,CAnBM;AAoBP,OAAO,MAAMU,eAAe,GAAIC,WAAD,IAAiB,MAAOlB,QAAP,IAAoB;AAClEA,EAAAA,QAAQ,CAAC;AAAEC,IAAAA,IAAI,EAAER;AAAR,GAAD,CAAR;AACA,QAAMW,GAAG,GAAG,MAAMR,KAAK,CAACM,IAAN,CAAW,wEAAX,EAAqFgB,WAArF,CAAlB;AACMlB,EAAAA,QAAQ,CAACY,WAAW,EAAZ,CAAR;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EAJ4D,CAKhE;AACA;AACD,CAPI,C,CASP;;AACA,OAAO,MAAMK,WAAW,GAAG,MAAM,MAAOZ,QAAP,IAAoB;AACjDA,EAAAA,QAAQ,CAAC;AAAEC,IAAAA,IAAI,EAAER;AAAR,GAAD,CAAR;AACFG,EAAAA,KAAK,CAACuB,GAAN,CAAU,wEAAV,EACChB,IADD,CACOC,GAAD,IAAQ;AAEZJ,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEV,QADD;AAEL6B,MAAAA,OAAO,EAAEhB,GAAG,CAACG;AAFR,KAAD,CAAR;AAID,GAPD,EAQCO,KARD,CAQQC,GAAD,IAASV,OAAO,CAACC,GAAR,CAAYS,GAAZ,CARhB;AAUD,CAZM,C,CAaP;;AACA,OAAO,MAAMM,cAAc,GAAIC,YAAD,IAAkB,MAAOtB,QAAP,IAAmB;AAC/D,QAAMI,GAAG,GAAG,MAAMR,KAAK,CAACM,IAAN,CAAY,yFAAZ,EAClB;AACIqB,IAAAA,UAAU,EAAC,eADf;AAEIC,IAAAA,aAAa,EAACF;AAFlB,GADkB,CAAlB;AAMIjB,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASkB,YAArB;AACAjB,EAAAA,sBAAsB,CAACJ,GAAG,CAACG,IAAJ,CAASkB,YAAV,CAAtB;AACAzB,EAAAA,QAAQ,CAACY,WAAW,EAAZ,CAAR,CAT2D,CAW/D;AACA;AACA;AACH,CAdM,C,CAeP;;AAEA,MAAMJ,sBAAsB,GAAIkB,KAAD,IAAW;AACtC,QAAMC,SAAS,GAAI,UAASD,KAAM,EAAlC;AACAE,EAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCF,SAAlC;AACA/B,EAAAA,KAAK,CAACkC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDL,SAAjD;AACD,CAJH;;AAKA,MAAMjB,iBAAiB,GAAIY,YAAD,IAAiB;AACvC,QAAMX,YAAY,GAAGW,YAArB;AACAM,EAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqClB,YAArC;AACH,CAHD;;AAKA,OAAO,MAAMsB,UAAU,GAAG,MAAOjC,QAAD,IAAa;AACzC4B,EAAAA,YAAY,CAACM,UAAb,CAAwB,WAAxB;AACAN,EAAAA,YAAY,CAACM,UAAb,CAAwB,cAAxB;AACA,SAAOtC,KAAK,CAACkC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACAhC,EAAAA,QAAQ,CAAC;AAAEC,IAAAA,IAAI,EAAEkC;AAAR,GAAD,CAAR;AACH,CALM,C,CAOP","sourcesContent":["import { SET_USER, LOADING_UI, LOADING_USER, CLEAR_ERRORS, SET_ERRORS } from \"../Types\";\r\nimport axios from \"axios\";\r\n\r\nexport const createUser = ( userData, Router ) => async (dispatch) =>{\r\n    dispatch({type:LOADING_UI});\r\n    axios.post('https://us-central1-resume-builder-startup.cloudfunctions.net/api/createAccount', userData)\r\n    .then((res)=>{\r\n        console.log(res.data)\r\n        setAuthorizationHeader(res.data.firstIdToken);\r\n        storeSessionToken(res.data.refreshToken)\r\n        dispatch(getUserData());\r\n        dispatch({ type: CLEAR_ERRORS});\r\n        Router.push('/admin/profile');\r\n        dispatch(getUserData());\r\n    })\r\n    .catch((err) =>{\r\n        console.log(err.response.data)\r\n        // dispatch({\r\n        //  type: SET_ERRORS,\r\n        //  payload: err.response.data\r\n        // })\r\n     });\r\n}\r\nexport const editUserDetails = (userDetails) => async (dispatch) => {\r\n  dispatch({ type: LOADING_USER });\r\n  const res = await axios.post('https://us-central1-resume-builder-startup.cloudfunctions.net/api/user', userDetails)      \r\n        dispatch(getUserData());\r\n        console.log(res.data)\r\n    //   })\r\n    //   .catch((err) => console.log(err));\r\n  };\r\n\r\n//This will fetch all the user INfo from the DataBase\r\nexport const getUserData = () => async (dispatch) => {\r\n    dispatch({ type: LOADING_USER})\r\n  axios.get('https://us-central1-resume-builder-startup.cloudfunctions.net/api/user')     \r\n  .then((res) =>{\r\n      \r\n    dispatch({\r\n        type: SET_USER,\r\n        payload: res.data\r\n    })\r\n  })\r\n  .catch((err) => console.log(err))\r\n   \r\n}\r\n//This will refresh the acsess toekm\r\nexport const refreshIdToken = (sessionToken) => async (dispatch) =>{\r\n    const res = await axios.post(`https://securetoken.googleapis.com/v1/token?key=AIzaSyBoIyQqz_8yKUFxjJO7jqBZWEslC7je7U4`,\r\n    {\r\n        grant_type:\"refresh_token\",        \r\n        refresh_token:sessionToken\r\n    }\r\n    )    \r\n        console.log(res.data.access_token)\r\n        setAuthorizationHeader(res.data.access_token)\r\n        dispatch(getUserData());\r\n    \r\n    // .catch((err) =>{\r\n    //     console.log(err)\r\n    // })\r\n}\r\n//Set the Authorizationheader for the Jwt token and user permisssio\r\n\r\nconst setAuthorizationHeader = (token) => {\r\n    const FBIdToken = `Bearer ${token}`;\r\n    localStorage.setItem('FBIdToken', FBIdToken);\r\n    axios.defaults.headers.common['Authorization'] = FBIdToken;\r\n  };\r\nconst storeSessionToken = (sessionToken) =>{\r\n    const refreshToken = sessionToken;\r\n    localStorage.setItem('refreshToken', refreshToken)\r\n}\r\n\r\nexport const logoutUser = () => (dispatch) =>{\r\n    localStorage.removeItem('FBIdToken'); \r\n    localStorage.removeItem('refreshToken');\r\n    delete axios.defaults.headers.common['Authorization'];\r\n    dispatch({ type: SET_UNAUTHENTICATED });\r\n}\r\n\r\n// Update User ACcount\r\n\r\n"]},"metadata":{},"sourceType":"module"}