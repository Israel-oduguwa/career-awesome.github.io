{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { withRouter, useRouter } from \"next/router\";\nimport { withRouterProps } from \"next/dist/client/with-router\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\nimport fetch from \"isomorphic-unfetch\";\nimport Head from 'next/head';\nimport useSWR from 'swr';\nimport Interweave from \"interweave\";\nimport Comment from \"../../../components/Likes_Comments/Comment\"; // import StaticPageNavBar from \"../NavComponents/StaticPageNavbar\";\n\nimport { withStyles } from '@material-ui/core/styles'; // import { getBlog } from  \"../Redux/Actions/dataAction\";\n\nimport Typography from '@material-ui/core/Typography';\nimport axios from \"axios\"; // import PropTypes from \"prop-types\";\n\nimport Avatar from '@material-ui/core/Avatar';\nimport BlogPreview from '../../../components/blogPreveiw'; // export default function blog({blog}){\n//     const router = useRouter();\n//     if(!router.isFallback && !blog){\n//         return <div>ERROR 404</div>\n//     }\n//     return(\n// <>\n// </>\n//     )\n// }\n\nexport async function getStaticProps({\n  params\n}) {\n  const id = params.id;\n  const res = await fetch(`https://us-central1-resume-builder-startup.cloudfunctions.net/api/getBlog/${id}`);\n  const data = await res.json(); // console.log(data);\n\n  return {\n    props: {\n      blog: data\n    }\n  };\n}\nexport async function getStaticPaths() {\n  const res = await fetch(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/getAllBlog\");\n  const data = await res.json();\n  return {\n    paths: data ? data.map(blog => ({\n      params: {\n        id: blog.blogId,\n        title: blog.title\n      }\n    })) : [],\n    fallback: true\n  };\n}\n\nconst SimilarBlog = props => {\n  const router = useRouter();\n  const id = router.query.id;\n  const {\n    data,\n    error\n  } = useSWR(`https://us-central1-resume-builder-startup.cloudfunctions.net/api/categoryBlog/${id}`);\n  if (error) return /*#__PURE__*/_jsx(\"div\", {});\n  if (!data) return /*#__PURE__*/_jsx(\"div\", {\n    children: \"LOading...\"\n  });\n\n  if (props.display) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(BlogPreview, {\n        data: data\n      })\n    });\n  }\n};\n\nexport class BlogPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      comment: \"\",\n      commentCount: \"\",\n      blogId: \"\",\n      likeCount: \"\",\n      body: \"\",\n      loading: false\n    });\n\n    _defineProperty(this, \"hoverSet\", () => {\n      this.setState({\n        comment: this.props.blog.comments,\n        commentCount: this.props.blog.commentCount,\n        likeCount: this.props.blog.likeCount\n      });\n    });\n\n    _defineProperty(this, \"handleLike\", () => {\n      if (this.props.user.authenticated) {}\n    });\n\n    _defineProperty(this, \"submitComment\", () => {\n      if (this.props.user.authenticated) {\n        const commentData = {\n          body: this.state.body\n        };\n        this.setState({\n          loading: true\n        });\n        axios.post(`https://us-central1-resume-builder-startup.cloudfunctions.net/api/getBlog/${this.props.blog.blogId}/comment`, commentData).then(res => {\n          this.setState({\n            loading: false,\n            comment: [...this.state.comment, res.data],\n            commentCount: this.state.commentCount + 1\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        this.props.router.push('/signup');\n      }\n    });\n\n    _defineProperty(this, \"handleComment\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n  }\n\n  componentDidMount(prevProps) {\n    if (!this.props.router.isFallback) {\n      this.setState({\n        comment: this.props.blog.comments,\n        commentCount: this.props.blog.commentCount,\n        likeCount: this.props.blog.likeCount\n      });\n    }\n  }\n\n  render() {\n    // const { router } = this.props;\n    const {\n      blog\n    } = this.props;\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: !this.props.router.isFallback ? /*#__PURE__*/_jsxs(\"div\", {\n        className: \"LandingPageContainer\",\n        children: [/*#__PURE__*/_jsx(Head, {\n          children: /*#__PURE__*/_jsx(\"title\", {\n            children: this.props.blog.title\n          })\n        }), this.props.blog ? /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            onClick: this.hoverSet,\n            children: \"SEtState\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"article\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-hcontent-center\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-md-8 align-self-center text-center\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"the-title\",\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    variant: \"h4\",\n                    gutterBottom: true,\n                    children: blog.title\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"ai-and-an\",\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: `/user/${blog.userId}/${blog.fullName.replace(/\\s+/g, '-')}`,\n                    children: /*#__PURE__*/_jsxs(\"a\", {\n                      children: [/*#__PURE__*/_jsx(Avatar, {\n                        alt: blog.fullName,\n                        src: blog.AuthorImage\n                      }), /*#__PURE__*/_jsx(Typography, {\n                        variant: \"subtitle2\",\n                        children: blog.fullName\n                      })]\n                    })\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-md-8 align-self-center\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"tp\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"bi\",\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: blog.thumbnail,\n                      alt: \"topImage\",\n                      className: \"bi-image\"\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"m-a\",\n                    children: /*#__PURE__*/_jsx(Interweave, {\n                      content: blog.body\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-md-3\",\n                children: \"hi\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-md-12\",\n                children: [\"likes \", blog.likeCount]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-md-12\",\n                children: /*#__PURE__*/_jsx(Comment, {\n                  blogId: blog.blogId,\n                  submitComment: this.submitComment,\n                  handleComment: this.handleComment,\n                  comments: this.state.comment,\n                  commentCount: this.state.commentCount\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-md-12\",\n                children: /*#__PURE__*/_jsx(SimilarBlog, {\n                  display: true\n                })\n              })]\n            })\n          })]\n        }) : /*#__PURE__*/_jsx(\"h1\", {\n          children: \"Loading\"\n        })]\n      }) : /*#__PURE__*/_jsx(_Fragment, {})\n    });\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.user // UI: state.UI\n\n});\n\nexport default connect(mapStateToProps)(withRouter(BlogPage));","map":null,"metadata":{},"sourceType":"module"}