{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{HEsO:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/editBlog/[id]\",function(){return a(\"oSNf\")}])},oSNf:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"__N_SSP\",(function(){return K})),a.d(t,\"editBlog\",(function(){return W}));var n=a(\"KQm4\"),c=a(\"1OyB\"),s=a(\"vuIU\"),r=a(\"JX7q\"),o=a(\"Ji7U\"),i=a(\"md7G\"),l=a(\"foSv\"),u=a(\"rePB\"),d=a(\"nKUr\"),h=a(\"q1tI\"),j=(a(\"91UR\"),a(\"bXiM\")),p=a(\"Ie8z\"),b=a(\"PsDL\"),m=a(\"csfp\"),g=a(\"iae6\"),f=a(\"H2TA\"),O=a(\"r9w1\"),v=a(\"ofer\"),x=a(\"Z3vd\"),y=a(\"cVXz\"),N=(a(\"VtrM\"),a(\"nOHt\")),I=a(\"9jPY\"),w=a(\"30+C\"),k=a(\"kKAo\"),C=a(\"jjAL\"),S=a(\"lO0E\"),_=a(\"BtGj\"),B=a.n(_),P=a(\"/MKj\"),E=a(\"z+mb\"),T=a(\"WUv8\"),U=a.n(T),D=a(\"nV/U\"),z=a.n(D),F=a(\"vDqi\"),A=a.n(F),R=a(\"QJNS\"),q=a(\"g3U7\");function J(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var K=!0,W=function(e){Object(o.a)(a,e);var t=J(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(u.a)(Object(r.a)(e),\"state\",{body:\"\",loading:!1,category:[\"category\"],description:\"\",title:\"\",message:\"\",thumbnailImage:\"\",imageName:\"\",caption:\"\"}),Object(u.a)(Object(r.a)(e),\"type\",(function(t){e.setState({body:t})})),Object(u.a)(Object(r.a)(e),\"handleChange\",(function(t){e.setState(Object(u.a)({},t.target.name,t.target.value))})),Object(u.a)(Object(r.a)(e),\"handlePost\",(function(){var t={body:e.state.body,title:e.state.title,category:e.state.category,description:e.state.description,thumbnail:e.state.thumbnailImage};A.a.post(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/postBlog/\".concat(e.props.blog.blogId,\"/update\"),t).then((function(t){e.props.getUserData(),e.setState({message:t.data.message}),console.log(t.data),e.props.router.push(\"/admin/blogPosts\")}))})),Object(u.a)(Object(r.a)(e),\"handlePostImageChange\",(function(t){e.setState({loading:!0});var a=t.target.files[0],n=new FormData;n.append(\"image\",a,a.name),A.a.post(\"/create-pdf/resumeImage\",n).then((function(t){e.setState({thumbnailImage:t.data.url,imageName:t.data.imageName,loading:!1})})).catch((function(e){console.log(e)}))})),Object(u.a)(Object(r.a)(e),\"PostTimelineImage\",(function(e){document.getElementById(\"postImage\").click()})),Object(u.a)(Object(r.a)(e),\"addCategory\",(function(t){var a=t.target.value;if(\"Enter\"===t.key&&a){if(e.state.category.find((function(e){return e.toLowerCase()===a.toLowerCase()})))return;e.setState({category:[].concat(Object(n.a)(e.state.category),[a])}),e.tagInput.value=null}else\"Backspace\"!==t.key||a||e.deleteCat(e.state.category.length-1)})),Object(u.a)(Object(r.a)(e),\"deleteCat\",(function(t){var a=Object(n.a)(e.state.category);a.splice(t,1),e.setState({category:a})})),e}return Object(s.a)(a,[{key:\"componentDidMount\",value:function(){this.props.user.authenticated?this.setState({body:this.props.blog.body,category:this.props.blog.category,title:this.props.blog.title,thumbnailImage:this.props.blog.thumbnail,description:this.props.blog.description}):this.props.router.push(\"/signup\")}},{key:\"render\",value:function(){var e=this,t=this.props.classes,a=this.state.body;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.a,{children:Object(d.jsx)(S.a,{children:Object(d.jsx)(\"h4\",{children:\"BlogPost\"})})}),Object(d.jsx)(\"div\",{className:\"container-fluid container2\",children:Object(d.jsxs)(\"div\",{className:\"row\",children:[Object(d.jsxs)(\"div\",{className:\"col-md-9\",children:[Object(d.jsx)(\"div\",{className:\"title-box\",children:Object(d.jsx)(O.a,{id:\"title\",label:\"Title\",name:\"title\",onChange:this.handleChange,variant:\"outlined\",value:this.state.title,fullWidth:!0})}),Object(d.jsx)(\"br\",{}),Object(d.jsx)(\"div\",{className:\"rich-text\",children:Object(d.jsx)(\"div\",{className:\"rich-text-wall\",children:Object(d.jsx)(R.a,{body:a,handleChange:this.type})})})]}),Object(d.jsx)(\"div\",{className:\"col-md-3\",children:Object(d.jsx)(\"div\",{className:\"right-panel\",children:Object(d.jsx)(\"div\",{className:\"meta-wall\",children:Object(d.jsxs)(\"div\",{className:\"row\",children:[Object(d.jsx)(\"div\",{className:\"col-md-6 col-sm-6\",children:Object(d.jsx)(\"div\",{className:\"language\",children:Object(d.jsxs)(y.a,{name:\"language\",id:\"language\",label:\"language\",children:[Object(d.jsx)(C.a,{value:\"Website\",children:\"English\"}),Object(d.jsx)(C.a,{value:\"Facebook\",children:\"French\"})]})})}),Object(d.jsx)(\"div\",{className:\"col-md-6 col-sm-6\",children:Object(d.jsx)(\"div\",{className:\"publish\",children:Object(d.jsx)(x.a,{onClick:this.handlePost,variant:\"contained\",color:\"primary\",endIcon:Object(d.jsx)(B.a,{}),children:\"Update\"})})}),Object(d.jsxs)(\"div\",{className:\"col-md-12 scheme-input\",children:[Object(d.jsx)(v.a,{variant:\"subtitle\",gutterBottom:!0,children:\"Description\"}),Object(d.jsx)(q.a,{onChange:this.handleChange,name:\"description\",\"aria-label\":\"maximum height\",placeholder:\"Short description of the article\",value:this.state.description})]}),Object(d.jsx)(\"div\",{className:\"col-md-12 cont\",children:Object(d.jsxs)(\"div\",{className:\"categories\",children:[Object(d.jsx)(v.a,{variant:\"subtitle\",gutterBottom:!0,children:\"Categories\"}),Object(d.jsxs)(k.a,{component:\"ul\",className:t.root,children:[this.state.category.map((function(a,n){return Object(d.jsx)(\"li\",{children:Object(d.jsx)(I.a,{label:a,onDelete:function(){return e.deleteCat(n)},className:t.chip})},n)})),Object(d.jsx)(O.a,{className:\"categoryText\",label:\"New category\",onKeyDown:this.addCategory,ref:function(t){e.tagInput=t},id:\"standard-size-small\",size:\"small\"})]})]})}),Object(d.jsxs)(\"div\",{className:\"col-md-12 conts\",children:[Object(d.jsx)(v.a,{variant:\"subtitle\",gutterBottom:!0,children:\"Thumbnail Image\"}),Object(d.jsx)(\"input\",{type:\"file\",id:\"postImage\",accept:\"images/*\",className:t.postImage,multiple:!0,onChange:this.handlePostImageChange,hidden:\"hidden\"}),Object(d.jsx)(\"label\",{htmlFor:\"contained-button-file\",children:Object(d.jsx)(x.a,{onClick:this.PostTimelineImage,variant:\"contained\",color:\"default\",endIcon:Object(d.jsx)(z.a,{}),component:\"span\",children:\"Upload Image\"})}),Object(d.jsx)(\"br\",{}),\"\"!==this.state.thumbnailImage||this.state.loading?this.state.loading?Object(d.jsx)(g.a,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.a,{title:\"cancelImage\",children:Object(d.jsx)(b.a,{className:t.coverButton,children:Object(d.jsx)(U.a,{style:{fontSize:\"4vh\"}})})}),Object(d.jsx)(w.a,{children:Object(d.jsx)(p.a,{image:this.state.thumbnailImage,className:\"card-image2\"})})]}):Object(d.jsx)(\"p\",{})]}),Object(d.jsx)(\"div\",{className:\"col-md-12 cont\",children:Object(d.jsx)(O.a,{label:\"Caption\",onChange:this.handleChange,name:\"caption\",fullWidth:!0,variant:\"outlined\"})})]})})})})]})})]})}}]),a}(h.Component);t.default=Object(P.b)((function(e){return{user:e.user}}),{getUserData:E.c})(Object(N.withRouter)(Object(f.a)((function(e){return{root:{display:\"flex\",justifyContent:\"center\",flexWrap:\"wrap\",listStyle:\"none\",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)},input:{display:\"none\"}}}))(W)))},\"z+mb\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return l})),a.d(t,\"b\",(function(){return u})),a.d(t,\"c\",(function(){return d})),a.d(t,\"e\",(function(){return h})),a.d(t,\"d\",(function(){return b}));var n=a(\"o0o1\"),c=a.n(n),s=a(\"HaE+\"),r=a(\"9QRE\"),o=a(\"vDqi\"),i=a.n(o),l=function(e,t){return function(){var a=Object(s.a)(c.a.mark((function a(n){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:r.e}),i.a.post(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/createAccount\",e).then((function(e){console.log(e.data),j(e.data.firstIdToken),p(e.data.refreshToken),n(d()),n({type:r.a}),t.push(\"/admin/profile\"),n(d())})).catch((function(e){console.log(e.response.data)}));case 2:case\"end\":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:r.f}),t.next=3,i.a.post(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/user\",e);case 3:n=t.sent,a(d()),console.log(n.data);case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:r.f}),i.a.get(\"https://us-central1-resume-builder-startup.cloudfunctions.net/api/user\").then((function(e){t({type:r.k,payload:e.data})})).catch((function(e){return console.log(e)}));case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post(\"https://securetoken.googleapis.com/v1/token?key=AIzaSyBoIyQqz_8yKUFxjJO7jqBZWEslC7je7U4\",{grant_type:\"refresh_token\",refresh_token:e});case 2:n=t.sent,console.log(n.data.access_token),j(n.data.access_token),a(d());case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){var t=\"Bearer \".concat(e);localStorage.setItem(\"FBIdToken\",t),i.a.defaults.headers.common.Authorization=t},p=function(e){var t=e;localStorage.setItem(\"refreshToken\",t)},b=function(e){return function(t){localStorage.removeItem(\"FBIdToken\"),localStorage.removeItem(\"refreshToken\"),delete i.a.defaults.headers.common.Authorization,t({type:r.j}),e.push(\"/\")}}}},[[\"HEsO\",1,0,2,4,3,5,6,7,8,10,13,14]]]);","extractedComments":[]}